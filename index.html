<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="http://getbootstrap.com/favicon.ico">

    <title>Jumbotron Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="http://getbootstrap.com/examples/jumbotron/jumbotron.css" rel="stylesheet">



  </head>
<style>



text {
  font: 10px sans-serif;
}



</style>
<body>


    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand">IVIS15 Project 2 by Evert Lagerberg</a>
        </div>
      </div>
    </nav>


<div class="jumbotron">
  <div class="container">
    <h1>Political Values in South America</h1>
    

    <p>Visualization of stance of respondents in the World View Survey on the following political system:</p>

    <p><em>Having a strong leader who does not have to bother with parliament and elections</em></p>
    
    
  <form>
  <label><input class="controllAll controllAll2" type="radio" onclick = "changeAll(this)" name="dataset" value="wave3" checked> 1994-1998</label>
  <label><input class="controllAll" type="radio" onclick = "changeAll(this)" name="dataset" value="wave4"> 1999-2004</label>
  <label><input class="controllAll" type="radio" onclick = "changeAll(this)" name="dataset" value="wave5"> 2005-2009</label>
  <label><input class="controllAll" type="radio" onclick = "changeAll(this)" name="dataset" value="wave6"> 2010-2014</label>
</form>
  </div>
</div>




<div class="container">
      <!-- Example row of columns -->
<div class="row">
<div class="col-md-4">
<div id="argentina">
<h2>Argentina</h2>
  <form>
  <label><input class="argentina" id="arg_wave3" type="radio" name="dataset" value="wave3" checked> 1994-1998</label>
  <label><input class="argentina" id="arg_wave4" type="radio" name="dataset" value="wave4"> 1999-2004</label>
  <label><input class="argentina" id="arg_wave5" type="radio" name="dataset" value="wave5"> 2005-2009</label>
  <label><input class="argentina" id="arg_wave6"type="radio" name="dataset" value="wave6"> 2010-2014</label>
</form>
</div>
</div>
<div class="col-md-4">
<div id="brazil">
<h2>Brazil</h2>
  <form>
  <label><input class="brazil" id="brazil_wave3" type="radio" name="dataset" value="wave3" checked>1994-1998</label>
  <label><input class="brazil" id="brazil_wave4" type="radio" name="dataset" value="wave4">1999-2004</label>
  <label><input class="brazil" id="brazil_wave5"type="radio" name="dataset" value="wave5"> 2005-2009</label>
  <label><input class="brazil" id="brazil_wave6" type="radio" name="dataset" value="wave6"> 2010-2014</label>
</form>
</div>
</div>
<div class="col-md-4">
<div id="chile">
<h2>Chile</h2>
  <form>
  <label><input class="chile" id="chile_wave3" type="radio" name="dataset" value="wave3" checked> 1994-1998</label>
  <label><input class="chile" id="chile_wave4" type="radio" name="dataset" value="wave4">1999-2004</label>
  <label><input class="chile" id="chile_wave5" type="radio" name="dataset" value="wave5"> 2005-2009</label>
  <label><input class="chile" id="chile_wave6" type="radio" name="dataset" value="wave6"> 2010-2014</label>
</form>
</div>
</div>
</div>


<div class="row">
<div class="col-md-4">
<div id="colombia">
<h2>Colombia</h2>
  <form>
  <label><input class="colombia" id="col_wave3" type="radio" name="dataset" value="wave3" checked> 1994-1998</label>
  <label><input class="colombia" id="col_wave4" type="radio" name="dataset" value="wave4"> 1999-2004</label>
  <label><input class="colombia" id="col_wave5" type="radio" name="dataset" value="wave5"> 2005-2009</label>
  <label><input class="colombia" id="col_wave6" type="radio" name="dataset" value="wave6"> 2010-2014</label>
</form>
</div>
</div>
<div class="col-md-4">
<div id="ecuador">
<h2>Ecuador</h2>
  <form>
  <label><input class="ecuador" id="ecu_wave3" type="radio" name="dataset" value="wave3" checked>1994-1998</label>
  <label><input class="ecuador" id="ecu_wave4" type="radio" name="dataset" value="wave4">1999-2004</label>
  <label><input class="ecuador" id="ecu_wave5" type="radio" name="dataset" value="wave5"> 2005-2009</label>
  <label><input class="ecuador" id="ecu_wave6" type="radio" name="dataset" value="wave6"> 2010-2014</label>
</form>
</div>
</div>
<div class="col-md-4">
<div id="peru">
<h2>Peru</h2>
  <form>
  <label><input class="peru" id="peru_wave3" type="radio" name="dataset" value="wave3" checked> 1994-1998</label>
  <label><input class="peru" id="peru_wave4" type="radio" name="dataset" value="wave4">1999-2004</label>
  <label><input class="peru" id="peru_wave5" type="radio" name="dataset" value="wave5"> 2005-2009</label>
  <label><input class="peru" id="peru_wave6" type="radio" name="dataset" value="wave6"> 2010-2014</label>
</form>
</div>
</div>
</div>




<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>



</body>
<script src="http://d3js.org/d3.v3.min.js"></script>

<script>
    function changeAll(radioObj) {
            if (radioObj.value == "wave3") {
                $("#arg_wave3").click();
                $("#brazil_wave3").click();
                $("#chile_wave3").click();
                $("#col_wave3").click();
                $("#ecu_wave3").click();
                $("#peru_wave3").click();
                
            }
              if (radioObj.value == "wave4") {
                $("#arg_wave4").click();
                $("#brazil_wave4").click();
                $("#chile_wave4").click();
                $("#col_wave4").click();
                $("#ecu_wave4").click();
                $("#peru_wave4").click();
            }
              if (radioObj.value == "wave5") {
                $("#arg_wave5").click();
                $("#brazil_wave5").click();
                $("#chile_wave5").click();
                $("#col_wave5").click();
                $("#ecu_wave5").click();
                $("#peru_wave5").click();
            }
              if (radioObj.value == "wave6") {
                $("#arg_wave6").click();
                $("#brazil_wave6").click();
                $("#chile_wave6").click();
                $("#col_wave6").click();
                $("#ecu_wave6").click();
                $("#peru_wave6").click();
            }

    }
</script>

<script>

var width = 350,
    height = 400,
    radius = Math.min(width, height)*0.5;

var legendRectSize = 18;                                  // NEW
var legendSpacing = 4; 



var color = d3.scale.ordinal()
  .range(['#31a354', '#a1d99b', '#fdae6b', '#e6550d', '#bdbdbd']); 

var pie = d3.layout.pie()
    .value(function(d) { return d.wave3; })
    .sort(null);

var arc = d3.svg.arc()
    .innerRadius(radius - 70)
    .outerRadius(radius - 20);


var dataset = [
{ label: 'Very Good', count: 10 }, 
{ label: 'Fairly Good', count: 20 },
{ label: 'Bad', count: 30 },
{ label: 'Very Bad', count: 40 },
{ label: 'N/DK', count: 40 }
]; 


var tooltip = d3.select("body")
  .append("div")
  .style("position", "absolute")
  .style("text-align", "center")
  .style("width", "120px")
  .style("height", "100px")
  .style("padding", "10px")
  .style("padding", "10px")
  .style("font", "12px sans-serif")
  .style("color", "#fff")
  .style("background", "rgba(0, 0, 0, 0.8)")
  .style("border", "0px")
  .style("border-radius", "8px")
  .style("pointer-events", "none")
  .text("a simple tooltip");


       

                
            
        
        


//ARG
var svg = d3.select("#argentina").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + 170 + "," + 170 + ")")
  .on("mouseover", function(){
    tooltip.text("Argentina was a Military Regime until 1976-1983");
    return tooltip.style("visibility", "visible");
  })
  .on("mousemove", function(){return tooltip.style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");})
  .on("mouseout", function(){return tooltip.style("visibility", "hidden");});

   
    var legend = svg.selectAll(".legend")                     
      .data(dataset)                                   
      .enter()                                               
      .append('g')                                            
      .attr('class', 'legend')                              
      .attr('transform', function(d, i) {                     
        var height = legendRectSize + legendSpacing;          
        var offset =  50;     // NEW
        var horz = -2 * legendRectSize;                       
        var vert = i * height - offset;                       
        return 'translate(' + horz + ',' + vert + ')';        
      });                                                     

    legend.append('rect')                                    
      .attr('width', legendRectSize)                          
      .attr('height', legendRectSize)                        
      .style('fill', function(d, i) { return color(i); })                                  
      .style('stroke', function(d, i) { return color(i); });                               
      
  

  
      legend.append('text')                                     
      .attr('x', legendRectSize + legendSpacing)              
      .attr('y', legendRectSize - legendSpacing)         
      .text(function(d) { return d.label; });      



d3.tsv("data.tsv", type, function(error, data) {
  var path = svg.datum(data).selectAll("path")
      .data(pie)
    .enter().append("path")
      .attr("fill", function(d, i) { return color(i); })
      .attr("d", arc)
      .each(function(d) { this._current = d; }); // store the initial angles

     legend.append('text')                                     // NEW
      .attr('x', legendRectSize + legendSpacing-50)              // NEW
      .attr('y', legendRectSize - legendSpacing)
      .attr('class', "arginfo")              // NEW
      .text(function(d, i) { return data[i]["wave3"] });  


  d3.selectAll(".argentina")
      .on("change", change);


 


  /*var timeout = setTimeout(function() {
    d3.select("input[value=\"wave4\"]").property("checked", true).each(change);
  }, 2000);*/

  function change() {
    console.log(this.value);
    value = this.value;
    console.log(data[1][value]);
    //clearTimeout(timeout);
    pie.value(function(d) { return d[value]; }); // change the value function
    path = path.data(pie); // compute the new angles
    path.transition().duration(750).attrTween("d", arcTween); // redraw the arcs
    d3.selectAll(".arginfo").text(function(d, i) { return data[i][value] });


  }
});
              

//BRAZIL
var svg2 = d3.select("#brazil").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + 170 + "," + 170 + ")")
    .on("mouseover", function(){
    tooltip.text("Brazil was a Military Regime 1964–1985");
    return tooltip.style("visibility", "visible");
  })
  .on("mousemove", function(){return tooltip.style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");})
  .on("mouseout", function(){return tooltip.style("visibility", "hidden");});



    var legend2 = svg2.selectAll(".legend")                     
      .data(dataset)                                   
      .enter()                                               
      .append('g')                                            
      .attr('class', 'legend')                              
      .attr('transform', function(d, i) {                     
        var height = legendRectSize + legendSpacing;          
        var offset =  50;     // NEW
        var horz = -2 * legendRectSize;                       
        var vert = i * height - offset;                       
        return 'translate(' + horz + ',' + vert + ')';        
      });                                                     

    legend2.append('rect')                                    
      .attr('width', legendRectSize)                          
      .attr('height', legendRectSize)                        
      .style('fill', function(d, i) { return color(i); })                                  
      .style('stroke', function(d, i) { return color(i); });                               
      
  

  
      legend2.append('text')                                     
      .attr('x', legendRectSize + legendSpacing)              
      .attr('y', legendRectSize - legendSpacing)         
      .text(function(d) { return d.label; });  

d3.tsv("data2.tsv", type, function(error, data) {
  var path2 = svg2.datum(data).selectAll("path2")
      .data(pie)
    .enter().append("path")
      .attr("fill", function(d, i) { return color(i); })
      .attr("d", arc)
      .each(function(d) { this._current = d; }); // store the initial angles


       legend2.append('text')                                     // NEW
      .attr('x', legendRectSize + legendSpacing-50)              // NEW
      .attr('y', legendRectSize - legendSpacing)
      .attr('class', "brazilinfo")              // NEW
      .text(function(d, i) { return data[i]["wave3"] });

   d3.selectAll(".brazil")
      .on("change", change);
 

  /*var timeout = setTimeout(function() {
    d3.select("input[value=\"wave4\"]").property("checked", true).each(change);
  }, 2000);*/

  function change() {
    
    console.log(this.value);
    value = this.value;
    console.log(data[1][value]);
    //clearTimeout(timeout);
    pie.value(function(d) { return d[value]; }); // change the value function
    path2 = path2.data(pie); // compute the new angles
    path2.transition().duration(750).attrTween("d", arcTween); // redraw the arcs
    d3.selectAll(".brazilinfo").text(function(d, i) { return data[i][value] });

    

  }
});
//CHILE
var svg3 = d3.select("#chile").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + 170+ "," + 170+ ")")
    .on("mouseover", function(){
    tooltip.text("Chile was a Military Regime 1973-1989");
    return tooltip.style("visibility", "visible");
  })
  .on("mousemove", function(){return tooltip.style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");})
  .on("mouseout", function(){return tooltip.style("visibility", "hidden");});


    var legend3 = svg3.selectAll(".legend")                     
      .data(dataset)                                   
      .enter()                                               
      .append('g')                                            
      .attr('class', 'legend')                              
      .attr('transform', function(d, i) {                     
        var height = legendRectSize + legendSpacing;          
        var offset =  50;     // NEW
        var horz = -2 * legendRectSize;                       
        var vert = i * height - offset;                       
        return 'translate(' + horz + ',' + vert + ')';        
      });                                                     

    legend3.append('rect')                                    
      .attr('width', legendRectSize)                          
      .attr('height', legendRectSize)                        
      .style('fill', function(d, i) { return color(i); })                                  
      .style('stroke', function(d, i) { return color(i); });                               
      
  

  
      legend3.append('text')                                     
      .attr('x', legendRectSize + legendSpacing)              
      .attr('y', legendRectSize - legendSpacing)         
      .text(function(d) { return d.label; }); 
d3.tsv("data3.tsv", type, function(error, data) {
  var path3 = svg3.datum(data).selectAll("path2")
      .data(pie)
    .enter().append("path")
      .attr("fill", function(d, i) { return color(i); })
      .attr("d", arc)
      .each(function(d) { this._current = d; }); // store the initial angles


       legend3.append('text')                                     // NEW
      .attr('x', legendRectSize + legendSpacing-50)              // NEW
      .attr('y', legendRectSize - legendSpacing)
      .attr('class', "chileinfo")              // NEW
      .text(function(d, i) { return data[i]["wave3"] });

   d3.selectAll(".chile")
      .on("change", change);

  /*var timeout = setTimeout(function() {
    d3.select("input[value=\"wave4\"]").property("checked", true).each(change);
  }, 2000);*/

  function change() {
    
    console.log(this.value);
    value = this.value;
    console.log(data[1][value]);
    //clearTimeout(timeout);
    pie.value(function(d) { return d[value]; }); // change the value function
    path3 = path3.data(pie); // compute the new angles
    path3.transition().duration(750).attrTween("d", arcTween); // redraw the arcs
    d3.selectAll(".chileinfo").text(function(d, i) { return data[i][value] });

    

  }
});
//COLOMBIA
var svg4 = d3.select("#colombia").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + 170+ "," + 170+ ")")
  .on("mouseover", function(){
    tooltip.text("Colombia was a Military Regime 1953–1958.");
    return tooltip.style("visibility", "visible");
  })
  .on("mousemove", function(){return tooltip.style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");})
  .on("mouseout", function(){return tooltip.style("visibility", "hidden");});


    var legend4 = svg4.selectAll(".legend")                     
      .data(dataset)                                   
      .enter()                                               
      .append('g')                                            
      .attr('class', 'legend')                              
      .attr('transform', function(d, i) {                     
        var height = legendRectSize + legendSpacing;          
        var offset =  50;     // NEW
        var horz = -2 * legendRectSize;                       
        var vert = i * height - offset;                       
        return 'translate(' + horz + ',' + vert + ')';        
      });                                                     

    legend4.append('rect')                                    
      .attr('width', legendRectSize)                          
      .attr('height', legendRectSize)                        
      .style('fill', function(d, i) { return color(i); })                                  
      .style('stroke', function(d, i) { return color(i); });                               
      
  

  
      legend4.append('text')                                     
      .attr('x', legendRectSize + legendSpacing)              
      .attr('y', legendRectSize - legendSpacing)         
      .text(function(d) { return d.label; }); 
d3.tsv("data4.tsv", type, function(error, data) {
  var path4 = svg4.datum(data).selectAll("path2")
      .data(pie)
    .enter().append("path")
      .attr("fill", function(d, i) { return color(i); })
      .attr("d", arc)
      .each(function(d) { this._current = d; }); // store the initial angles


       legend4.append('text')                                     // NEW
      .attr('x', legendRectSize + legendSpacing-50)              // NEW
      .attr('y', legendRectSize - legendSpacing)
      .attr('class', "colinfo")              // NEW
      .text(function(d, i) { return data[i]["wave3"] });

   d3.selectAll(".colombia")
      .on("change", change);

  /*var timeout = setTimeout(function() {
    d3.select("input[value=\"wave4\"]").property("checked", true).each(change);
  }, 2000);*/

  function change() {
    
    console.log(this.value);
    value = this.value;
    console.log(data[1][value]);
    //clearTimeout(timeout);
    pie.value(function(d) { return d[value]; }); // change the value function
    path4 = path4.data(pie); // compute the new angles
    path4.transition().duration(750).attrTween("d", arcTween); // redraw the arcs
    d3.selectAll(".colinfo").text(function(d, i) { return data[i][value] });

    

  }
});


//ECUADOR
var svg5 = d3.select("#ecuador").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + 170+ "," + 170+ ")")
      .on("mouseover", function(){
    tooltip.text("Ecuador was a Military Regime 1972–1979.");
    return tooltip.style("visibility", "visible");
  })
  .on("mousemove", function(){return tooltip.style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");})
  .on("mouseout", function(){return tooltip.style("visibility", "hidden");});


    var legend5 = svg5.selectAll(".legend")                     
      .data(dataset)                                   
      .enter()                                               
      .append('g')                                            
      .attr('class', 'legend')                              
      .attr('transform', function(d, i) {                     
        var height = legendRectSize + legendSpacing;          
        var offset =  50;     // NEW
        var horz = -2 * legendRectSize;                       
        var vert = i * height - offset;                       
        return 'translate(' + horz + ',' + vert + ')';        
      });                                                     

    legend5.append('rect')                                    
      .attr('width', legendRectSize)                          
      .attr('height', legendRectSize)                        
      .style('fill', function(d, i) { return color(i); })                                  
      .style('stroke', function(d, i) { return color(i); });                               
      
  

  
      legend5.append('text')                                     
      .attr('x', legendRectSize + legendSpacing)              
      .attr('y', legendRectSize - legendSpacing)         
      .text(function(d) { return d.label; }); 
d3.tsv("data5.tsv", type, function(error, data) {
  var path5 = svg5.datum(data).selectAll("path2")
      .data(pie)
    .enter().append("path")
      .attr("fill", function(d, i) { return color(i); })
      .attr("d", arc)
      .each(function(d) { this._current = d; }); // store the initial angles


       legend5.append('text')                                     // NEW
      .attr('x', legendRectSize + legendSpacing-50)              // NEW
      .attr('y', legendRectSize - legendSpacing)
      .attr('class', "ecuinfo")              // NEW
      .text(function(d, i) { return data[i]["wave3"] });

   d3.selectAll(".ecuador")
      .on("change", change);

  /*var timeout = setTimeout(function() {
    d3.select("input[value=\"wave4\"]").property("checked", true).each(change);
  }, 2000);*/

  function change() {
    
    console.log(this.value);
    value = this.value;
    console.log(data[1][value]);
    //clearTimeout(timeout);
    pie.value(function(d) { return d[value]; }); // change the value function
    path5 = path5.data(pie); // compute the new angles
    path5.transition().duration(750).attrTween("d", arcTween); // redraw the arcs
    d3.selectAll(".ecuinfo").text(function(d, i) { return data[i][value] });

    

  }
});

//PERU
var svg6 = d3.select("#peru").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + 170+ "," + 170+ ")")
    .on("mouseover", function(){
    tooltip.text("Peru was a Military Regime 1968–1980.");
    return tooltip.style("visibility", "visible");
  })
  .on("mousemove", function(){return tooltip.style("top", (event.pageY-10)+"px").style("left",(event.pageX+10)+"px");})
  .on("mouseout", function(){return tooltip.style("visibility", "hidden");});


    var legend6 = svg6.selectAll(".legend")                     
      .data(dataset)                                   
      .enter()                                               
      .append('g')                                            
      .attr('class', 'legend')                              
      .attr('transform', function(d, i) {                     
        var height = legendRectSize + legendSpacing;          
        var offset =  50;     // NEW
        var horz = -2 * legendRectSize;                       
        var vert = i * height - offset;                       
        return 'translate(' + horz + ',' + vert + ')';        
      });                                                     

    legend6.append('rect')                                    
      .attr('width', legendRectSize)                          
      .attr('height', legendRectSize)                        
      .style('fill', function(d, i) { return color(i); })                                  
      .style('stroke', function(d, i) { return color(i); });                               
      

      legend6.append('text')                                     
      .attr('x', legendRectSize + legendSpacing)              
      .attr('y', legendRectSize - legendSpacing)         
      .text(function(d) { return d.label; }); 
d3.tsv("data6.tsv", type, function(error, data) {
  var path6 = svg6.datum(data).selectAll("path2")
      .data(pie)
    .enter().append("path")
      .attr("fill", function(d, i) { return color(i); })
      .attr("d", arc)
      .each(function(d) { this._current = d; }); // store the initial angles


       legend6.append('text')                                     // NEW
      .attr('x', legendRectSize + legendSpacing-50)              // NEW
      .attr('y', legendRectSize - legendSpacing)
      .attr('class', "peruinfo")              // NEW
      .text(function(d, i) { return data[i]["wave3"] });

   d3.selectAll(".peru")
      .on("change", change);

  /*var timeout = setTimeout(function() {
    d3.select("input[value=\"wave4\"]").property("checked", true).each(change);
  }, 2000);*/

  function change() {
    
    console.log(this.value);
    value = this.value;
    console.log(data[1][value]);
    //clearTimeout(timeout);
    pie.value(function(d) { return d[value]; }); // change the value function
    path6 = path6.data(pie); // compute the new angles
    path6.transition().duration(750).attrTween("d", arcTween); // redraw the arcs
    d3.selectAll(".peruinfo").text(function(d, i) { return data[i][value] });

    

  }
});
function type(d) {
  d.wave3 = +d.wave3;
  d.wave4 = +d.wave4;
  d.wave5 = +d.wave5;
  d.wave6 = +d.wave6;
  return d;
}

// Store the displayed angles in _current.
// Then, interpolate from _current to the new angles.
// During the transition, _current is updated in-place by d3.interpolate.
function arcTween(a) {
  var i = d3.interpolate(this._current, a);
  this._current = i(0);
  return function(t) {
    return arc(i(t));
  };
}

</script>